class Solution:
    def intersectionSizeTwo(self, intervals: List[List[int]]) -> int:
        intervals.sort(key = lambda v: (v[1], v[0]))
        arr = SortedList()
        res = 0
        for start, end in intervals:
            cnt = len(arr) - arr.bisect_left(start)
            if cnt == 1:
                while end in arr: end -= 1
                arr.add(end)
                res += 1
            elif cnt == 0:
                arr.add(end)
                arr.add(end - 1)
                res += 2
        return res