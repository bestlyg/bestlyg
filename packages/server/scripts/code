class Solution:
    def countCoveredBuildings(self, n: int, buildings: List[List[int]]) -> int:
        rows = defaultdict(list)
        cols = defaultdict(list)
        for x, y in buildings:
            rows[y].append(x)
            cols[x].append(y)
        for arr in rows.values():
            arr.sort()
        for arr in cols.values():
            arr.sort()
        res = 0
        for x, arr in rows.items():
            if len(arr) < 2: continue
            for y in arr[1:-1]:
                yarr = cols[y]
                if len(yarr) < 2: continue
                if yarr[0] < x < yarr[-1]:
                    res += 1
        return res