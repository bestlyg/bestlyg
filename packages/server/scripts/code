class Solution:
    def maxFrequency(self, nums: List[int], k: int, numOperations: int) -> int:
        c = Counter(nums)
        map = defaultdict(int)
        for num in nums:
            map[num - k] += 1
            map[num] += 0
            map[num + k + 1] -= 1
        res = cnt = 0
        for num in sorted(map.keys()):
            cnt += map[num]
            res = max(res, min(cnt - c[num], numOperations) + c[num])
        return res