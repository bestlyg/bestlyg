# 判断鼠标是否选中物体

判断鼠标是否选中物体可以转化为——相机与鼠标所连成的射线是否穿过物体所在的平面

已知：

- 射线
  - 原点：${E} = (ex,ey,ez)$
  - 方向：$\overrightarrow{V} = (vx,vy,vz)$
- 平面
  - 法向量：$\overrightarrow{N} = (nx,ny,nz)$
  - 平面中任意点：${A} = (ax,ay,az)$

1. 由于$\overrightarrow{N} \bot \overrightarrow{MA}$可得$(M - A) \cdot \overrightarrow{N} = 0$
1. 由于$\overrightarrow{EM} = \lambda \cdot \overrightarrow{V}$可得$M - E = \lambda \times \overrightarrow{V} \Rightarrow M = \lambda \times \overrightarrow{V} + E$
1. 联立可得
   $$
   \lambda = \frac{(A - E) \cdot \overrightarrow{N}}{\overrightarrow{V} \cdot \overrightarrow{N}}
   $$
   $$
   M = \frac{(A - E) \cdot \overrightarrow{N}}{\overrightarrow{V} \cdot \overrightarrow{N}} \times \overrightarrow{V} + E
   $$
