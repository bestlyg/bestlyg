class Solution:
    def totalFruit(self, fruits: List[int]) -> int:
        c = Counter()
        n = len(fruits)
        cnt = 0
        l = -1
        res = 0
        for r in range(n):
            c[fruits[r]] += 1
            if c[fruits[r]] == 1: cnt += 1
            while cnt > 2:
                c[fruits[l + 1]] -= 1
                if c[fruits[l + 1]] == 0: cnt -= 1
                l += 1
            res = max(res, r - l)
        return res