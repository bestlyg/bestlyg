class Solution:
    def minimumCoins(self, prices: List[int]) -> int:
        @cache
        def dfs(idx: int, max_idx: int) -> int:
            if idx == len(prices): return 0
            res = dfs(idx + 1, max(max_idx, (idx + 1) * 2) - 1) + prices[idx]
            if idx <= max_idx:
                res = min(res, dfs(idx + 1, max_idx))
            return res
        return dfs(0, -1)