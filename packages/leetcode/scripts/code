class Solution:
    @cache
    def isSubPath(self, head: Optional[ListNode], root: Optional[TreeNode], init: bool = True) -> bool:
        if init: self.head = head
        if head == None: return True
        if root == None: return False
        if head.val == root.val and (self.isSubPath(head.next, root.left, False) or self.isSubPath(head.next, root.right, False)): return True
        return self.isSubPath(self.head, root.left, False) or self.isSubPath(self.head, root.right, False)