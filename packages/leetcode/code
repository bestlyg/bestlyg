class Solution:
    def numFriendRequests(self, ages: List[int]) -> int:
        ages.sort()
        res = 0
        for x in range(len(ages)):
            starty = bisect_right(ages, 0.5 * ages[x] + 7)
            endy = bisect_right(ages, ages[x])
            if ages[x] < 100: endy = min(endy, bisect_right(ages, 100))
            if starty < endy: res += endy - starty
            if starty <= x < endy: res -= 1
        return res