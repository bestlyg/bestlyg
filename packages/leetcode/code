from sortedcontainers import SortedList
class Solution:
    def maximumRobots(self, chargeTimes: List[int], runningCosts: List[int], budget: int) -> int:
        n = len(chargeTimes)
        l = 0
        nsum = 0
        sl = SortedList(key = lambda i: chargeTimes[i])
        get_budget = lambda l, r, sl, nsum: chargeTimes[sl[-1]] + len(sl) * nsum if l <= r else inf
        res = 0
        for r in range(n):
            sl.add(r)
            nsum += runningCosts[r]
            while l <= r and get_budget(l, r, sl, nsum) > budget:
                nsum -= runningCosts[l]
                sl.remove(l)
                l += 1
            if get_budget(l, r, sl, nsum) <= budget:
                res = max(res, len(sl))
        return res